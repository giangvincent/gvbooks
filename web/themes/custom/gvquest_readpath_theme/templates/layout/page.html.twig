{#
  Default layout shell for GVQuest theme.
  Provides shared header/footer while individual pages override main layout.
#}

{{ attach_library('gvquest_readpath_theme/navbar') }}

{% set current_route = app.request.attributes.get('_route') %}
{% set current_path = app.request.getPathInfo() %}
{% set nav_links = [
  {
    'title': 'Home',
    'url': path('<front>'),
    'active': current_path == '/' or current_route == '<front>'
  },
  {
    'title': 'Dashboard',
    'url': path('view.my_daily_reading.page_1'),
    'active': current_route == 'view.my_daily_reading.page_1'
  },
  {
    'title': 'Analytics',
    'url': path('gvquest_analytics.dashboard'),
    'active': current_route == 'gvquest_analytics.dashboard'
  },
  {
    'title': 'Streaks',
    'url': path('gvquest_streaks.dashboard'),
    'active': current_route starts with 'gvquest_streaks.'
  }
] %}

{{ dump(nav_links) }}

{% include '@gvquest_readpath_theme/includes/site-header.html.twig' with {
  links: nav_links,
  site_name: site_name
} %}

<main id="main-content" class="sana-container py-16">
  {% if page.highlighted %}
    <div class="mb-6">
      {{ page.highlighted }}
    </div>
  {% endif %}

  {% if page.breadcrumb %}
    <div class="mb-6 text-sm text-sana-muted">
      {{ page.breadcrumb }}
    </div>
  {% endif %}

  <div class="grid gap-10">
    {% if page.dashboard %}
      <section class="rounded-3xl bg-sana-card/60 p-8 shadow-dashboard border border-white/5">
        {{ page.dashboard }}
      </section>
    {% endif %}

    <section class="rounded-3xl bg-sana-card/40 p-8 shadow-dashboard border border-white/5">
      {{ page.content }}
    </section>
  </div>
</main>

{% if page.footer %}
  <div class="sana-container py-10">
    {{ page.footer }}
  </div>
{% endif %}

{% include '@gvquest_readpath_theme/includes/site-footer.html.twig' with { site_name: site_name } %}
